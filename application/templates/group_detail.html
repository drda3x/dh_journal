{% extends "base.html" %}

{% block head %}

    <link rel="stylesheet" href="../static/css/group_detail.css" />

    <style>

    {% for color_class in passes_color_classes %}

        .{{ color_class.name }} {
            background-color: {{ color_class.val }};
        }

    {% endfor %}

    </style>

    <script type="text/javascript" src="/static/js/matrix.js"></script>
    <script type="text/javascript" src="/static/js/popover.js"></script>
{% endblock %}

{% block body %}
    {% block content %}
    <div class="journal-header">
        <div id="dateControl" class="dropdown">
            <strong class="text-info">
                Месяц:
            </strong>
                <a class="navbar-link dropdown-toggle" href="#" data-toggle="dropdown">
                    {{ control_data.constant.current_date }}
                </a>
                <b class="caret"></b>
            <ul class="dropdown-menu usr">
                {% for month in control_data.date_control %}
                    <li><a href="/group?id={{ group_detail.id }}&date={{ month.val }}" tabindex="-1">{{ month.name }}</a></li>
                {% endfor %}
            </ul>
        </div>
        <strong class="text-info">Группа: </strong>{{ group_detail.name }}
        <span id="infoLastLesson"><strong class="text-info" style="margin: 0 0 0 10px;">Последнее занятие: </strong>01.06.2015</span>
        <span id="infoStartDate" style="display: none;"><strong  class="text-info" style="margin: 0 0 0 10px;">Дата начала: </strong>{{ group_detail.start_date }}</span>
    </div>
    <ul class="nav nav-tabs" id="navTab">
        <li class="active"><a id="journalNav" href="#journal-tc" data-toggle="tab">Ведомость</a></li>
        <li><a id="infoNav" href="#info" data-toggle="tab">Группа</a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="journal-tc">
            {% include "component_journal.html" %}
        </div>
        <div class="tab-pane" id="info">
            {% include "component_group_info.html" %}
        </div>
    </div>

    {% endblock %}
    {% block script %}

        <script type="text/javascript">

            (function() {
                $('#journalNav').click(function() {
                    $('#infoLastLesson').show();
                    $('#infoStartDate').hide();
                });

                $('#infoNav').click(function() {
                    $('#infoLastLesson').hide();
                    $('#infoStartDate').show();
                });

                // todo проработать механизм хранения отмененных занятий (походу для этого нужен рефакторинг)
                // todo проработать выбор ведомостей за разные промежутки времени
            })();
        </script>

    {% endblock %}

{% endblock %}